<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terra Balance</title>
    <link rel="stylesheet" href="https://unpkg.com/normalize.css">
    <link rel="stylesheet" href="styles/product-detail.css">
    <script src="scripts/product.js"></script>
    <script src="scripts/auth.js" defer></script>
    <script src="scripts/script.js" defer></script>
    <link rel="stylesheet" href="styles/style.css">
    
    <link rel="stylesheet" href="styles/product-detail.css">
    <link rel="stylesheet" href="styles/style-large.css">
    <script src="scripts/avatar.js"defer></script>
    <script src="scripts/details.js" defer></script>
    
    <link rel="icon" href="images/terrabalance-logo.svg" type="image/webp">

    <link rel="stylesheet" href="styles/bootstrap.min.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Outfit:wght@100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <meta name="description" content="">
    <meta name="author" content="Lifegate Justice">
    
</head>
<body>
  <header>
    <nav>
    <div class="headercontainer">
        <div class="hero-img">   
            <a href="index.html" target="_blank" style="text-decoration: none;">
                <img src="images/terrabalance-logo.svg" alt="Clickable Image" loading="lazy">
            </a>
        </div>

        <div class="first-icons">
            <a href="#" class="search1" id="search-icon-link">
                <img src="images/assets/search_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24 (1).svg" alt="Search icon image" id="search-icon">
            </a>
            <a class="nav-link" href="cart.html"><img src="images/assets/shopping_cart_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg" alt=""><span id="cart-count" class="badge bg-danger position-absolute top-0 start-100 translate-middle">0</span></a>
            <a href="products.html"><img src="images/assets/store_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg" alt=""></a>
            <span class="user-icon">
            <a href="form.html" title="Sign">
                <img class="user-avatar" src="images/assets/account_circle_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg" alt="account icon">
            </a>
        </span>
            <button id="menu" aria-label="Toggle navigation">
                <span class="hamburger-icon"></span>
            </button>
        </div>

        <nav class="navigation" aria-label="Main navigation">
            <div class="search-container" id="search-bar">
                <input type="text" id="search" placeholder="Search">
                <button type="submit" id="searchButton">
                    <!-- If you need an account icon here as well -->
                    <button><img src="images/assets/search_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg" alt="search icon"></button>
                </button>
            </div>

            <a href="index.html">Home</a>
            <a href="about.html">About Us</a>
            <a href="#">Contact Us</a>
            <a href="#">Projects</a>
            <div class="second-icons">

                <a class="nav-link" href="cart.html"><img src="images/assets/shopping_cart_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg" alt=""><span id="cart-count" class="badge bg-danger position-absolute top-0 start-100 translate-middle">0</span></a>




                <a href="products.html"><img src="images/assets/store_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg" alt="shop"></a>
                <span class="user-icon">
                <a href="form.html" title="Sign">
                    <img class="user-avatar" src="images/assets/account_circle_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg" alt="account icon">
                </a>
                <!-- Dropdown menu (hidden by default) -->
    
            </span>
            </div>
        </nav>
    </div>
</header>

<main>
    <div class="row">
            <div class="col-md-6">
                <img id="product-image" src="" alt="Product Image" class="img-fluid zoomable">
            </div>
            <div class="col-md-6 one">
                <h1 id="product-name"></h1>
                <p class="text-muted" id="product-description"></p>
                <h3 id="product-price"></h3>
                <label for="quantity">Quantity:</label>
                <div class="input-group w-50 mb-3">
                    <button class="btn btn-outline-secondary" type="button" id="decrease-qty">-</button>
                    <input type="number" id="quantity" value="1" min="1" class="form-control text-center">
                    <button class="btn btn-outline-secondary" type="button" id="increase-qty">+</button>
                </div>
                <button class="product-button" id="add-to-cart">Add to Cart</button>
                <p class="mt-3 text-success" id="cart-message"></p>
            </div>
        </div>

        <section class="mt-5">
            <h2>Product Description</h2>
            <p id="product-about"></p>
        </section>

        <section class="mt-5">
            <h2>Related Products</h2>
            <div id="related-products" class="d-flex overflow-auto">
                <div id="related-carousel-content" class="d-flex"></div>
            </div>
            <div class="d-none d-md-flex justify-content-between mt-3">
                <button id="prev-related" class="btn btn-secondary">&lt;</button>
                <button id="next-related" class="btn btn-secondary">&gt;</button>
            </div>
        </section>
    </main>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');

        const ecoFriendlyProducts = [
        {
        id: 1,
        name: "Organic Tomatoes",
        description: "Fresh organic tomatoes grown without pesticides.",
        price: 3.99,
        image: "images/tomatoes.jpg"
    },
    {
        id: 2,
        name: "Free-Range Eggs",
        description: "Eggs from free-range chickens, rich in flavor.",
        price: 4.99,
        image: "images/fresheggs-medium.jpg"
    },
    {
        id: 3,
        name: "Compost",
        description: "Nutrient-rich compost for your garden.",
        price: 5.49,
        image: "images/compost.jpg"
    },
    {
        id: 4,
        name: "Organic Cassava",
        description: "Sustainably farmed cassava, perfect for cooking.",
        price: 2.99,
        image: "images/cassava-farming.webp"
    },
    {
        id: 5,
        name: "Fresh Fish",
        description: "Locally sourced fresh fish, caught sustainably.",
        price: 10.99,
        image: "images/catfish-farming.webp"
    },
    {
        id: 6,
        name: " Chicken",
        description: "Free chicken meat, hormone-free.",
        price: 12.99,
        image: "images/chicken-farming.webp"
    },
    {
        id: 7,
        name: "Plantain",
        description: "Fresh plantains, perfect for frying or baking.",
        price: 1.99,
        image: "images/plantain-farming.webp"
    },
    {
        id: 8,
        name: "Goat Meat",
        description: "Sustainably sourced goat meat, rich in flavor.",
        price: 15.99,
        image: "images/goat-farming.webp"
    },
    {
        id: 9,
        name: "Snail",
        description: "Farm-raised snails, a delicacy for gourmet dishes.",
        price: 8.99,
        image: "images/snail-farming.webp"
    },
    {
    id: 11,
    name: "Fresh Basil",
    description: "A variety of fresh basil for your cooking needs.",
    price: 2.99,
    image: "images/basil.jpg"
},
{
    id: 12,
    name: "Organic Carrots",
    description: "Fresh organic carrots grown without pesticides.",
    price: 1.99,
    image: "images/carrots.jpg"
},
{
    id: 13,
    name: "Free-Range Turkey",
    description: "Eggs from free-range turkeys, rich in flavor.",
    price: 6.99,
    image: "images/turkey.jpg"
},
{
    id: 14,
    name: "Compost Tea",
    description: "Nutrient-rich compost tea for your garden.",
    price: 4.99,
    image: "images/compost-tea.jpg"
},
{
    id: 15,
    name: "Organic Quinoa",
    description: "Sustainably farmed quinoa, perfect for cooking.",
    price: 3.99,
    image: "images/quinoa.jpg"
},
{
    id: 16,
    name: "Fresh Shrimp",
    description: "Locally sourced fresh shrimp, caught sustainably.",
    price: 12.99,
    image: "images/shrimp.jpg"
},
{
    id: 17,
    name: "Organic Beef",
    description: "Free-range organic beef, hormone-free.",
    price: 14.99,
    image: "images/beef.jpg"
},
{
    id: 18,
    name: "Plantain Chips",
    description: "Fresh plantain chips, perfect for snacking.",
    price: 2.99,
    image: "images/plantain-chips.jpg"
},
{
    id: 19,
    name: "Goat Cheese",
    description: "Sustainably sourced goat cheese, rich in flavor.",
    price: 8.99,
    image: "images/goat-cheese.jpg"
},
{
    id: 20,
    name: "Snail Sauce",
    description: "Farm-raised snail sauce, a delicacy for gourmet dishes.",
    price: 9.99,
    image: "images/snail-sauce.jpg"
}
        ];

        const product = ecoFriendlyProducts.find(p => p.id == productId);

        if (product) {
            document.getElementById('product-image').src = product.image;
            document.getElementById('product-name').innerText = product.name;
            document.getElementById('product-description').innerText = product.description;
            document.getElementById('product-about').innerText = product.about;
            document.getElementById('product-price').innerText = `$${product.price.toFixed(2)}`;
        }

        function updatePrice() {
            if (!product) return;
            let quantity = parseInt(document.getElementById("quantity").value) || 1;
            document.getElementById("product-price").innerText = `$${(product.price * quantity).toFixed(2)}`;
        }

        document.getElementById("increase-qty").addEventListener("click", function() {
            let quantityInput = document.getElementById("quantity");
            quantityInput.value = parseInt(quantityInput.value) + 1;
            updatePrice();
        });

        document.getElementById("decrease-qty").addEventListener("click", function() {
            let quantityInput = document.getElementById("quantity");
            if (parseInt(quantityInput.value) > 1) {
                quantityInput.value = parseInt(quantityInput.value) - 1;
                updatePrice();
            }
        });

        document.getElementById("quantity").addEventListener("input", updatePrice);

document.getElementById("add-to-cart").addEventListener("click", function() {
    if (!product) return;
    let quantity = parseInt(document.getElementById("quantity").value);
    let cartCount = localStorage.getItem("cartCount") ? parseInt(localStorage.getItem("cartCount")) : 0;
    cartCount += quantity;
    localStorage.setItem("cartCount", cartCount);
    document.getElementById("cart-count").innerText = cartCount;
    document.getElementById("cart-message").innerText = "Product added to cart!";
    setTimeout(() => {
        document.getElementById("cart-message").innerText = "";
    }, 2000);
    updateCartCount();
});

document.addEventListener("DOMContentLoaded", function() {
    let cartCount = localStorage.getItem("cartCount") ? parseInt(localStorage.getItem("cartCount")) : 0;
    document.getElementById("cart-count").innerText = cartCount;
    updateCartCount();
});

// Function to get logged-in user
function getLoggedInUser() {
    return JSON.parse(localStorage.getItem("loggedInUser")); // Expected format: { id: 123, name: "John Doe" }
}

// Function to get cart key based on logged-in user
function getCartKey() {
    let user = getLoggedInUser();
    return user ? `cartItems_user_${user.id}` : "cartItems_guest";
}

// Function to get user-specific cart
function getCartItems() {
    return JSON.parse(localStorage.getItem(getCartKey())) || [];
}

// Function to update cart count
function updateCartCount() {
    let cartItems = getCartItems();
    document.getElementById("cart-count").innerText = cartItems.reduce((sum, item) => sum + item.quantity, 0);
}

// Add to cart event
document.getElementById("add-to-cart").removeEventListener("click", function() {
    if (!product) return;
    let quantity = parseInt(document.getElementById("quantity").value);
    let cartItems = getCartItems();

    let existingItem = cartItems.find(item => item.id === product.id);
    if (existingItem) {
        existingItem.quantity += quantity;
    } else {
        cartItems.push({ ...product, quantity });
    }

    localStorage.setItem(getCartKey(), JSON.stringify(cartItems));
    document.getElementById("cart-message").innerText = "Product added to cart!";
    setTimeout(() => document.getElementById("cart-message").innerText = "", 2000);
    updateCartCount();
});

document.getElementById("add-to-cart").addEventListener("click", function() {
    if (!product) return;
    let quantity = parseInt(document.getElementById("quantity").value);
    let cartItems = getCartItems();

    let existingItem = cartItems.find(item => item.id === product.id);
    if (existingItem) {
        existingItem.quantity += quantity;
    } else {
        cartItems.push({ ...product, quantity });
    }

    localStorage.setItem(getCartKey(), JSON.stringify(cartItems));
    document.getElementById("cart-message").innerText = "Product added to cart!";
    setTimeout(() => document.getElementById("cart-message").innerText = "", 2000);
    updateCartCount();
});

    </script>
</body>
</html>
